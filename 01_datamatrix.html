<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  <style>
  .tooltip{
	 font-family: simsun;
	 font-size: 14px;
	 width: 120;
	 height: auto;
	 position: absolute;
	 text-align: center;
     border-style: solid; 
	 border-width: 1px;
	 background-color: white;
	 border-radius: 3px;
        padding: 3px;
  }
  .infotxt{
	 font-family: simsun;
	 font-size: 14px;
	 width: 120;
	 height: auto;
	 position: absolute;
	 text-align: center;
  }
  </style>
  </head>
  <body>
    <center><div id="heatmap"></div></center>
    <script src="lib/d3.js"></script>
<script>
var data = [
    {score: 1.0, row: 0, col: 0, des: "Human-lncRNA"},
    {score: 1.0, row: 1, col: 0, des: "Human-SNP"},
    {score: 1.0, row: 2, col: 0, des: "Human-Conserve"},
    {score: 1.0, row: 3, col: 0, des: "Human-M6A"},
    {score: 1.0, row: 4, col: 0, des: "Human-Peptide"},
    {score: 1.0, row: 5, col: 0, des: "Human-3C"},
    {score: 1.0, row: 6, col: 0, des: "Human-Chipseq"},
    {score: 1.0, row: 7, col: 0, des: "Human-JASPAR"},
    {score: 1.0, row: 8, col: 0, des: "Human-eQTL"},
    {score: 1.0, row: 0, col: 1, des: "Mouse-lncRNA"},
    {score: 1.0, row: 1, col: 1, des: "Mouse-SNP"},
    {score: 1.0, row: 2, col: 1, des: "Mouse-Conserve"},
    {score: 1.0, row: 3, col: 1, des: "Mouse-M6A"},
    {score: 1.0, row: 4, col: 1, des: "Mouse-Peptide"},
    {score: 1.0, row: 5, col: 1, des: "Mouse-3C"},
    {score: 1.0, row: 6, col: 1, des: "Mouse-Chipseq"},
    {score: 1.0, row: 7, col: 1, des: "Mouse-JASPAR"},
    {score: 0.0, row: 8, col: 1, des: "Mouse-eQTL"},
    {score: 1.0, row: 0, col: 2, des: "Rat-lncRNA"},
    {score: 1.0, row: 1, col: 2, des: "Rat-SNP"},
    {score: 1.0, row: 2, col: 2, des: "Rat-Conserve"},
    {score: 0.0, row: 3, col: 2, des: "Rat-M6A"},
    {score: 0.0, row: 4, col: 2, des: "Rat-Peptide"},
    {score: 0.0, row: 5, col: 2, des: "Rat-3C"},
    {score: 0.0, row: 6, col: 2, des: "Rat-Chipseq"},
    {score: 0.0, row: 7, col: 2, des: "Rat-JASPAR"},
    {score: 0.0, row: 8, col: 2, des: "Rat-eQTL"},
    {score: 1.0, row: 0, col: 3, des: "Cow-lncRNA"},
    {score: 1.0, row: 1, col: 3, des: "Cow-SNP"},
    {score: 1.0, row: 2, col: 3, des: "Cow-Conserve"},
    {score: 0.0, row: 3, col: 3, des: "Cow-M6A"},
    {score: 0.0, row: 4, col: 3, des: "Cow-Peptide"},
    {score: 0.0, row: 5, col: 3, des: "Cow-3C"},
    {score: 0.0, row: 6, col: 3, des: "Cow-Chipseq"},
    {score: 0.0, row: 7, col: 3, des: "Cow-JASPAR"},
    {score: 0.0, row: 8, col: 3, des: "Cow-eQTL"},
    {score: 1.0, row: 0, col: 4, des: "Chicken-lncRNA"},
    {score: 1.0, row: 1, col: 4, des: "Chicken-SNP"},
    {score: 1.0, row: 2, col: 4, des: "Chicken-Conserve"},
    {score: 0.0, row: 3, col: 4, des: "Chicken-M6A"},
    {score: 0.0, row: 4, col: 4, des: "Chicken-Peptide"},
    {score: 0.0, row: 5, col: 4, des: "Chicken-3C"},
    {score: 0.0, row: 6, col: 4, des: "Chicken-Chipseq"},
    {score: 0.0, row: 7, col: 4, des: "Chicken-JASPAR"},
    {score: 0.0, row: 8, col: 4, des: "Chicken-eQTL"},
    {score: 1.0, row: 0, col: 5, des: "Zebrafish-lncRNA"},
    {score: 1.0, row: 1, col: 5, des: "Zebrafish-SNP"},
    {score: 1.0, row: 2, col: 5, des: "Zebrafish-Conserve"},
    {score: 0.0, row: 3, col: 5, des: "Zebrafish-M6A"},
    {score: 1.0, row: 4, col: 5, des: "Zebrafish-Peptide"},
    {score: 0.0, row: 5, col: 5, des: "Zebrafish-3C"},
    {score: 0.0, row: 6, col: 5, des: "Zebrafish-Chipseq"},
    {score: 1.0, row: 7, col: 5, des: "Zebrafish-JASPAR"},
    {score: 0.0, row: 8, col: 5, des: "Zebrafish-eQTL"},
    {score: 1.0, row: 0, col: 6, des: "Fruitfly-lncRNA"},
    {score: 1.0, row: 1, col: 6, des: "Fruitfly-SNP"},
    {score: 1.0, row: 2, col: 6, des: "Fruitfly-Conserve"},
    {score: 0.0, row: 3, col: 6, des: "Fruitfly-M6A"},
    {score: 1.0, row: 4, col: 6, des: "Fruitfly-Peptide"},
    {score: 1.0, row: 5, col: 6, des: "Fruitfly-3C"},
    {score: 1.0, row: 6, col: 6, des: "Fruitfly-Chipseq"},
    {score: 1.0, row: 7, col: 6, des: "Fruitfly-JASPAR"},
    {score: 0.0, row: 8, col: 6, des: "Fruitfly-eQTL"},
    {score: 1.0, row: 0, col: 7, des: "Worm-lncRNA"},
    {score: 1.0, row: 1, col: 7, des: "Worm-SNP"},
    {score: 1.0, row: 2, col: 7, des: "Worm-Conserve"},
    {score: 0.0, row: 3, col: 7, des: "Worm-M6A"},
    {score: 0.0, row: 4, col: 7, des: "Worm-Peptide"},
    {score: 0.0, row: 5, col: 7, des: "Worm-3C"},
    {score: 1.0, row: 6, col: 7, des: "Worm-Chipseq"},
    {score: 1.0, row: 7, col: 7, des: "Worm-JASPAR"},
    {score: 0.0, row: 8, col: 7, des: "Worm-eQTL"},
    {score: 1.0, row: 0, col: 8, des: "Yeast-lncRNA"},
    {score: 1.0, row: 1, col: 8, des: "Yeast-SNP"},
    {score: 1.0, row: 2, col: 8, des: "Yeast-Conserve"},
    {score: 1.0, row: 3, col: 8, des: "Yeast-M6A"},
    {score: 1.0, row: 4, col: 8, des: "Yeast-Peptide"},
    {score: 1.0, row: 5, col: 8, des: "Yeast-3C"},
    {score: 0.0, row: 6, col: 8, des: "Yeast-Chipseq"},
    {score: 1.0, row: 7, col: 8, des: "Yeast-JASPAR"},
    {score: 0.0, row: 8, col: 8, des: "Yeast-eQTL"},
    {score: 1.0, row: 0, col: 9, des: "A.tha-lncRNA"},
    {score: 1.0, row: 1, col: 9, des: "A.tha-SNP"},
    {score: 1.0, row: 2, col: 9, des: "A.tha-Conserve"},
    {score: 1.0, row: 3, col: 9, des: "A.tha-M6A"},
    {score: 1.0, row: 4, col: 9, des: "A.tha-Peptide"},
    {score: 0.0, row: 5, col: 9, des: "A.tha-3C"},
    {score: 0.0, row: 6, col: 9, des: "A.tha-Chipseq"},
    {score: 1.0, row: 7, col: 9, des: "A.tha-JASPAR"},
    {score: 0.0, row: 8, col: 9, des: "A.tha-eQTL"}
];

var data2 = [
    {score: 1.0, row: 0, col: 0, des: "lncRNA"},
    {score: 1.0, row: 1, col: 0, des: "SNP"},
    {score: 1.0, row: 2, col: 0, des: "Conserve"},
    {score: 1.0, row: 3, col: 0, des: "M6A"},
    {score: 1.0, row: 4, col: 0, des: "Peptide"},
    {score: 1.0, row: 5, col: 0, des: "3C"},
    {score: 1.0, row: 6, col: 0, des: "Chipseq"},
    {score: 1.0, row: 7, col: 0, des: "JASPAR"},
    {score: 1.0, row: 8, col: 0, des: "eQTL"}
];

var data3 = [
    {score: 1.0, row: 0, col: 0, des: "Human"},
    {score: 1.0, row: 0, col: 1, des: "Mouse"},
    {score: 1.0, row: 0, col: 2, des: "Rat"},
    {score: 1.0, row: 0, col: 3, des: "Cow"},
    {score: 1.0, row: 0, col: 4, des: "Chicken"},
    {score: 1.0, row: 0, col: 5, des: "Zebrafish"},
    {score: 1.0, row: 0, col: 6, des: "Fruitfly"},
    {score: 1.0, row: 0, col: 7, des: "Worm"},
    {score: 1.0, row: 0, col: 8, des: "Yeast"},
    {score: 1.0, row: 0, col: 9, des: "A.tha"}
];
//height of each row in the heatmap
//width of each column in the heatmap

var gridSize = 50,
    h = 25,
    w = gridSize,
    rectPadding = 60;

var colorLow = 'red', colorMed = '#cccccc', colorHigh = 'green';

var margin = {top: 60, right: 80, bottom: 30, left: 75},
    width = 640 - margin.left - margin.right,
    height = 360 - margin.top - margin.bottom;

var colorScale = d3.scale.linear()
     .domain([-1, 0, 1])
     .range([colorLow, colorMed, colorHigh]);

var svg = d3.select("#heatmap").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



var heatMap = svg.selectAll(".heatmap")
    .data(data, function(d) { return d.col + ':' + d.row; })
    .enter().append("svg:rect")
    .attr("x", function(d) { return d.row * w; })
    .attr("y", function(d) { return d.col * h; })
    .attr("width", function(d) { return w; })
    .attr("height", function(d) { return h; })
    .style("fill", function(d) { return colorScale(d.score); })
    .style("stroke", "black")
    .style("stroke-width", "0.1");

var title2 = svg.selectAll(".heatmap")
    .data(data2)
    .enter().append("svg:text")
    .attr("x", function(d) { return d.row * w+25; })
    .attr("y", function(d) { return d.col * h-58; })
    .attr("id", function(d) { return 'b' + d.row + '' + d.col; })
    .attr("font-size", "14")
    .attr("font-family", "Verdana")
    .attr("fill", "#333333")
    .attr("writing-mode", "tb")
    .attr("glyph-orientation-vertical", "90")
    .text(function(d) { return d.des; });

var title3 = svg.selectAll(".heatmap")
    .data(data3)
    .enter().append("svg:text")
    .attr("x", function(d) { return d.row * w-60; })
    .attr("y", function(d) { return d.col * h+15; })
    .attr("id", function(d) { return 'a' + d.row + '' + d.col; })
    .attr("font-size", "14")
    .attr("font-family", "Verdana")
    .attr("fill", "#333333")
    .text(function(d) { return d.des; });

var tooltip = d3.select("body")
    .append("div")
    .attr("class","tooltip")
    .style("opacity",0.0);

var arcs = svg.selectAll("rect");

arcs.on("mouseover",function(d){
        tooltip.html(d.des)
            .style("left", (d3.event.pageX) + "px")
            .style("top", (d3.event.pageY + 20) + "px")
            .style("opacity",1.0)
        svg.selectAll('text#a0'+d.col)
            .attr("fill", "red")
            .attr("font-size", "16")
        svg.selectAll('text#b'+d.row+'0')
            .attr("fill", "red")
            .attr("font-size", "16")
        d3.select(this)
            .style('fill', '#0F0');
    })
    .on("mousemove",function(d){
        tooltip.style("left", (d3.event.pageX) + "px")
        .style("top", (d3.event.pageY + 20) + "px");
    })
    .on("mouseout",function(d){
        tooltip.style("opacity",0.0);
        svg.selectAll('text#a0'+d.col)
            .attr("fill", "#333333")
            .attr("font-size", "14")
        svg.selectAll('text#b'+d.row+'0')
            .attr("fill", "#333333")
            .attr("font-size", "14")
        d3.select(this)
          .style("fill", function(d) { return colorScale(d.score); });
    });
</script>
  </body>
</html>
